<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>R6 Class containing non-dataset specific methods — DataClass • covidregionaldata</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="R6 Class containing non-dataset specific methods — DataClass" />
<meta property="og:description" content="A parent class containing non-dataset specific methods." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">covidregionaldata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.2.4000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/quickstart.html">Getting Started</a>
</li>
<li>
  <a href="../articles/dataset-status.html">Data Status</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/slowstart.html">Package Overview</a>
    </li>
    <li>
      <a href="../articles/testing.html">Testing Datasets</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/epiforecasts/covidregionaldata/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>R6 Class containing non-dataset specific methods</h1>
    <small class="dont-index">Source: <a href='https://github.com/epiforecasts/covidregionaldata/blob/master/R/shared-methods.R'><code>R/shared-methods.R</code></a></small>
    <div class="hidden name"><code>DataClass.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A parent class containing non-dataset specific methods.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All data sets have shared methods for extracting geographic codes,
downloading, processing, and returning data. These functions are contained
within this parent class and so are accessible by all data sets which
inherit from here. Individual data sets can overwrite any functions or
fields providing they define a method with the same name, and can be
extended with additional functionality. See the individual method
documentaion for further details.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Data interface functions
<code><a href='CountryDataClass.html'>CountryDataClass</a></code>,
<code><a href='get_available_datasets.html'>get_available_datasets</a>()</code>,
<code><a href='get_national_data.html'>get_national_data</a>()</code>,
<code><a href='get_regional_data.html'>get_regional_data</a>()</code>,
<code><a href='initialise_dataclass.html'>initialise_dataclass</a>()</code></p></div>
    <h2 class="hasAnchor" id="public-fields"><a class="anchor" href="#public-fields"></a>Public fields</h2>

    <p><div class="r6-fields"></p><dl>
<dt><code>origin</code></dt><dd><p>the origin of the data source. For regional data sources
this will usually be the name of the country.</p></dd>

<dt><code>data</code></dt><dd><p>Once initialised, a list of named data frames: raw
(list of named raw data frames) clean (cleaned data) and processed
(processed data). Data is accessed using <code>$data</code>.</p></dd>

<dt><code>supported_levels</code></dt><dd><p>A list of supported levels.</p></dd>

<dt><code>supported_region_names</code></dt><dd><p>A list of region names in order of level.</p></dd>

<dt><code>supported_region_codes</code></dt><dd><p>A list of region codes in order of level.</p></dd>

<dt><code>region_name</code></dt><dd><p>string Name for the region column, e.g. 'region'.
This field is filled at initialisation with the region name for the
specified level (supported_region_names$level).</p></dd>

<dt><code>code_name</code></dt><dd><p>string Name for the codes column, e.g. 'iso_3166_2'
Filled at initialisation with the code name associated with the
requested level (supported_region_codes$level).</p></dd>

<dt><code>codes_lookup</code></dt><dd><p>string or tibble Region codes for the target origin
filled by origin specific codes in
<a href='#method-set_region_codes'><code>set_region_codes()</code></a></p></dd>

<dt><code>data_urls</code></dt><dd><p>List of named common and shared url links to raw data.
Prefers shared if there is a name conflict.</p></dd>

<dt><code>common_data_urls</code></dt><dd><p>List of named links to raw data that are common
across levels. The first entry should be named main.</p></dd>

<dt><code>level_data_urls</code></dt><dd><p>List of named links to raw data that are level
specific. Any urls that share a name with a url from
<code>common_data_urls</code> will be selected preferentially. Each top level
list should be named after a supported level.</p></dd>

<dt><code>source_data_cols</code></dt><dd><p>existing columns within the raw data</p></dd>

<dt><code>level</code></dt><dd><p>target region level. This field is filled at initialisation
using user inputs or defaults in <code>$new()</code></p></dd>

<dt><code>data_name</code></dt><dd><p>string. The country name followed by the level. E.g.
"Italy at level 1"</p></dd>

<dt><code>totals</code></dt><dd><p>Boolean. If TRUE, returns totalled data per region
up to today's date. This field is filled at initialisation using user
inputs or defaults in <code>$new()</code></p></dd>

<dt><code>localise</code></dt><dd><p>Boolean. Should region names be localised.
This field is filled at initialisation using user inputs or defaults
in <code>$new()</code></p></dd>

<dt><code>verbose</code></dt><dd><p>Boolean. Display information at various stages.
This field is filled at initialisation. using user inputs or defaults
in <code>$new()</code></p></dd>

<dt><code>steps</code></dt><dd><p>Boolean. Keep data from each processing step.
This field is filled at initialisation.using user inputs or defaults
in <code>$new()</code></p></dd>

<dt><code>target_regions</code></dt><dd><p>A character vector of regions to filter for. Used
by the <code>filter method</code>.</p></dd>

<dt><code>process_fns</code></dt><dd><p>array, additional, user supplied functions to process
the data.</p></dd>

<dt><code>filter_level</code></dt><dd><p>Character The level of the data to filter at.
Defaults to the target level.</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='public-methods'><a class='anchor' aria-hidden='true' href='#public-methods'></a>Public methods</h3>

<ul>
<li><p><a href='#method-set_region_codes'><code>DataClass$set_region_codes()</code></a></p></li>
<li><p><a href='#method-new'><code>DataClass$new()</code></a></p></li>
<li><p><a href='#method-download'><code>DataClass$download()</code></a></p></li>
<li><p><a href='#method-clean'><code>DataClass$clean()</code></a></p></li>
<li><p><a href='#method-clean_common'><code>DataClass$clean_common()</code></a></p></li>
<li><p><a href='#method-available_regions'><code>DataClass$available_regions()</code></a></p></li>
<li><p><a href='#method-filter'><code>DataClass$filter()</code></a></p></li>
<li><p><a href='#method-process'><code>DataClass$process()</code></a></p></li>
<li><p><a href='#method-get'><code>DataClass$get()</code></a></p></li>
<li><p><a href='#method-return'><code>DataClass$return()</code></a></p></li>
<li><p><a href='#method-summary'><code>DataClass$summary()</code></a></p></li>
<li><p><a href='#method-test'><code>DataClass$test()</code></a></p></li>
<li><p><a href='#method-clone'><code>DataClass$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-set_region_codes"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>set_region_codes()</code></h3>
<p>Place holder for custom country specific function to load
region codes.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>set_region_codes</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<h3 class='hasAnchor' id='list-set-region-codes-'><a class='anchor' aria-hidden='true' href='#list-set-region-codes-'></a>Method <code>set_region_codes()</code></h3>
<p>Place holder for custom country specific function to load
region codes.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>set_region_codes</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<p><hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>new()</code></h3>
<p>Initialize function used by all <code>DataClass</code> objects.
Set up the <code>DataClass</code> class with attributes set to input parameters.
Should only be called by a <code>DataClass</code> class object.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  level <span class='op'>=</span> <span class='st'>"1"</span>,
  <span class='va'>filter_level</span>,
  <span class='va'>regions</span>,
  totals <span class='op'>=</span> <span class='cn'>FALSE</span>,
  localise <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  steps <span class='op'>=</span> <span class='cn'>FALSE</span>,
  get <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>process_fns</span>
<span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>level</code></dt><dd><p>A character string indicating the target administrative
level of the data with the default being "1". Currently supported
options are level 1 ("1) and level 2 ("2").</p></dd>

<dt><code>filter_level</code></dt><dd><p>A character string indicating the level to filter at.
Defaults to the level of the data if not specified and if not otherwise
defined in the class.
Use <code><a href='get_available_datasets.html'>get_available_datasets()</a></code> for supported options by dataset.</p></dd>

<dt><code>regions</code></dt><dd><p>A character vector of target regions to be assigned to
the<code>target_regions</code> field if present.</p></dd>

<dt><code>totals</code></dt><dd><p>Logical, defaults to FALSE. If TRUE, returns totalled
data per region up to today's date. If FALSE, returns the full dataset
stratified by date and region.</p></dd>

<dt><code>localise</code></dt><dd><p>Logical, defaults to TRUE. Should region names be
localised.</p></dd>

<dt><code>verbose</code></dt><dd><p>Logical, defaults to TRUE. Should verbose processing</p></dd>

<dt><code>steps</code></dt><dd><p>Logical, defaults to FALSE. Should all processing and
cleaning steps be kept and output in a list.</p></dd>

<dt><code>get</code></dt><dd><p>Logical, defaults to FALSE. Should the class <code>get</code> method be
called (this will download, clean, and process data at initialisation).</p></dd>

<dt><code>process_fns</code></dt><dd><p>Array, additional functions to process the data.
Users can supply their own functions here which would act on clean data
and they will be called alongside our default processing functions.
The default optional function added is <code>set_negative_values_to_zero</code>.
if process_fns is not set (see <code>process_fns</code> field for all defaults).
If you want to keep this when supplying your own processing functions
remember to add it to your list also. If you feel you have created a
cool processing function that others could benefit from please submit a
Pull Request to our <a href='https://github.com/epiforecasts/covidregionaldata'>github repository</a>
and we will consider adding it to the package.</p></dd>

</dl><p></div></p>
<h3 class='hasAnchor' id='list-new-'><a class='anchor' aria-hidden='true' href='#list-new-'></a>Method <code>new()</code></h3>
<p>Initialize function used by all <code>DataClass</code> objects.
Set up the <code>DataClass</code> class with attributes set to input parameters.
Should only be called by a <code>DataClass</code> class object.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  level <span class='op'>=</span> <span class='st'>"1"</span>,
  <span class='va'>filter_level</span>,
  <span class='va'>regions</span>,
  totals <span class='op'>=</span> <span class='cn'>FALSE</span>,
  localise <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  steps <span class='op'>=</span> <span class='cn'>FALSE</span>,
  get <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>process_fns</span>
<span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>level</code></dt><dd><p>A character string indicating the target administrative
level of the data with the default being "1". Currently supported
options are level 1 ("1) and level 2 ("2").</p></dd>

<dt><code>filter_level</code></dt><dd><p>A character string indicating the level to filter at.
Defaults to the level of the data if not specified and if not otherwise
defined in the class.
Use <code><a href='get_available_datasets.html'>get_available_datasets()</a></code> for supported options by dataset.</p></dd>

<dt><code>regions</code></dt><dd><p>A character vector of target regions to be assigned to
the<code>target_regions</code> field if present.</p></dd>

<dt><code>totals</code></dt><dd><p>Logical, defaults to FALSE. If TRUE, returns totalled
data per region up to today's date. If FALSE, returns the full dataset
stratified by date and region.</p></dd>

<dt><code>localise</code></dt><dd><p>Logical, defaults to TRUE. Should region names be
localised.</p></dd>

<dt><code>verbose</code></dt><dd><p>Logical, defaults to TRUE. Should verbose processing</p></dd>

<dt><code>steps</code></dt><dd><p>Logical, defaults to FALSE. Should all processing and
cleaning steps be kept and output in a list.</p></dd>

<dt><code>get</code></dt><dd><p>Logical, defaults to FALSE. Should the class <code>get</code> method be
called (this will download, clean, and process data at initialisation).</p></dd>

<dt><code>process_fns</code></dt><dd><p>Array, additional functions to process the data.
Users can supply their own functions here which would act on clean data
and they will be called alongside our default processing functions.
The default optional function added is <code>set_negative_values_to_zero</code>.
if process_fns is not set (see <code>process_fns</code> field for all defaults).
If you want to keep this when supplying your own processing functions
remember to add it to your list also. If you feel you have created a
cool processing function that others could benefit from please submit a
Pull Request to our <a href='https://github.com/epiforecasts/covidregionaldata'>github repository</a>
and we will consider adding it to the package.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-download"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>download()</code></h3>
<p>Download raw data from <code>data_urls</code>, stores a named list
of the <code>data_url</code> name and the corresponding raw data table in
<code>data$raw</code></p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>download</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<h3 class='hasAnchor' id='list-download-'><a class='anchor' aria-hidden='true' href='#list-download-'></a>Method <code>download()</code></h3>
<p>Download raw data from <code>data_urls</code>, stores a named list
of the <code>data_url</code> name and the corresponding raw data table in
<code>data$raw</code></p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>download</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<p><hr>
<a id="method-clean"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>clean()</code></h3>
<p>Cleans raw data (corrects format, converts column types,
etc). Works on raw data and so should be called after
<a href='#method-download'><code>download()</code></a>
Calls the specific class specific cleaning method (<code>clean_common</code>)
followed by level specific cleaning methods.
<code>clean_level_[1/2]</code>. Cleaned data is stored in <code>data$clean</code></p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>clean</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<h3 class='hasAnchor' id='list-clean-'><a class='anchor' aria-hidden='true' href='#list-clean-'></a>Method <code>clean()</code></h3>
<p>Cleans raw data (corrects format, converts column types,
etc). Works on raw data and so should be called after
<a href='#method-download'><code>download()</code></a>
Calls the specific class specific cleaning method (<code>clean_common</code>)
followed by level specific cleaning methods.
<code>clean_level_[1/2]</code>. Cleaned data is stored in <code>data$clean</code></p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>clean</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<p><hr>
<a id="method-clean_common"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>clean_common()</code></h3>
<p>Cleaning methods that are common across a class.
By default this method is empty as if any code is required it should be
defined in a child class specific <code>clean_common</code> method.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>clean_common</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<h3 class='hasAnchor' id='list-clean-common-'><a class='anchor' aria-hidden='true' href='#list-clean-common-'></a>Method <code>clean_common()</code></h3>
<p>Cleaning methods that are common across a class.
By default this method is empty as if any code is required it should be
defined in a child class specific <code>clean_common</code> method.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>clean_common</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<p><hr>
<a id="method-available_regions"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>available_regions()</code></h3>
<p>Show regions that are available to be used for
filtering operations. Can only be called once <code>clean()</code> has been
called. Filtering level is determined by checking the <code>filter_level</code>
field.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>available_regions</span><span class='op'>(</span><span class='va'>level</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>level</code></dt><dd><p>A character string indicating the level to filter at.
Defaults to using the <code>filter_level</code> field if not specified</p></dd>

</dl><p></div></p>
<h3 class='hasAnchor' id='list-available-regions-'><a class='anchor' aria-hidden='true' href='#list-available-regions-'></a>Method <code>available_regions()</code></h3>
<p>Show regions that are available to be used for
filtering operations. Can only be called once <code>clean()</code> has been
called. Filtering level is determined by checking the <code>filter_level</code>
field.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>available_regions</span><span class='op'>(</span><span class='va'>level</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>level</code></dt><dd><p>A character string indicating the level to filter at.
Defaults to using the <code>filter_level</code> field if not specified</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-filter"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter()</a></code></h3>
<p>Filter cleaned data for a specific region  To be called
after <a href='#method-clean'><code>clean()</code></a></p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>filter</span><span class='op'>(</span><span class='va'>regions</span>, <span class='va'>level</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>regions</code></dt><dd><p>A character vector of target regions. Overrides the
current class setting for <code>target_regions</code>.</p></dd>

<dt><code>level</code></dt><dd><p>Character The level of the data to filter at. Defaults to
the lowest level in the data.</p></dd>

</dl><p></div></p>
<h3 class='hasAnchor' id='list-filter-'><a class='anchor' aria-hidden='true' href='#list-filter-'></a>Method <code><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter()</a></code></h3>
<p>Filter cleaned data for a specific region  To be called
after <a href='#method-clean'><code>clean()</code></a></p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>filter</span><span class='op'>(</span><span class='va'>regions</span>, <span class='va'>level</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>regions</code></dt><dd><p>A character vector of target regions. Overrides the
current class setting for <code>target_regions</code>.</p></dd>

<dt><code>level</code></dt><dd><p>Character The level of the data to filter at. Defaults to
the lowest level in the data.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-process"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>process()</code></h3>
<p>Processes data by adding and calculating absent columns.
Called on clean data (after <a href='#method-clean'><code>clean()</code></a>).
Some countries may have data as new events (e.g. number of
new cases for that day) whilst others have a running total up to that
date. Processing calculates these based on what the data comes with
via the functions <code><a href='region_dispatch.html'>region_dispatch()</a></code> and <code><a href='process_internal.html'>process_internal()</a></code>,
which does the following:</p><ul>
<li><p>Adds columns not present in the data <code><a href='add_extra_na_cols.html'>add_extra_na_cols()</a></code></p></li>
<li><p>Ensures there are no negative values
<code><a href='set_negative_values_to_zero.html'>set_negative_values_to_zero()</a></code></p></li>
<li><p>Removes NA dates <code><a href='fill_empty_dates_with_na.html'>fill_empty_dates_with_na()</a></code></p></li>
<li><p>Calculates cumulative data <code><a href='complete_cumulative_columns.html'>complete_cumulative_columns()</a></code></p></li>
<li><p>Calculates missing columns from existing ones
<code><a href='calculate_columns_from_existing_data.html'>calculate_columns_from_existing_data()</a></code></p></li>
</ul>
<h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>process</span><span class='op'>(</span><span class='va'>process_fns</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>process_fns</code></dt><dd><p>Array, additional functions to process the data.
Users can supply their own functions here which would act on clean data
and they will be called alongside our default processing functions.
The default optional function added is <code>set_negative_values_to_zero</code>.
if process_fns is not set (see <code>process_fns</code> field for all defaults).</p></dd>

</dl><p></div></p>
<h3 class='hasAnchor' id='list-process-'><a class='anchor' aria-hidden='true' href='#list-process-'></a>Method <code>process()</code></h3>
<p>Processes data by adding and calculating absent columns.
Called on clean data (after <a href='#method-clean'><code>clean()</code></a>).
Some countries may have data as new events (e.g. number of
new cases for that day) whilst others have a running total up to that
date. Processing calculates these based on what the data comes with
via the functions <code><a href='region_dispatch.html'>region_dispatch()</a></code> and <code><a href='process_internal.html'>process_internal()</a></code>,
which does the following:</p><ul>
<li><p>Adds columns not present in the data <code><a href='add_extra_na_cols.html'>add_extra_na_cols()</a></code></p></li>
<li><p>Ensures there are no negative values
<code><a href='set_negative_values_to_zero.html'>set_negative_values_to_zero()</a></code></p></li>
<li><p>Removes NA dates <code><a href='fill_empty_dates_with_na.html'>fill_empty_dates_with_na()</a></code></p></li>
<li><p>Calculates cumulative data <code><a href='complete_cumulative_columns.html'>complete_cumulative_columns()</a></code></p></li>
<li><p>Calculates missing columns from existing ones
<code><a href='calculate_columns_from_existing_data.html'>calculate_columns_from_existing_data()</a></code></p></li>
</ul>
<h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>process</span><span class='op'>(</span><span class='va'>process_fns</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>process_fns</code></dt><dd><p>Array, additional functions to process the data.
Users can supply their own functions here which would act on clean data
and they will be called alongside our default processing functions.
The default optional function added is <code>set_negative_values_to_zero</code>.
if process_fns is not set (see <code>process_fns</code> field for all defaults).</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-get"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code><a href='https://rdrr.io/r/base/get.html'>get()</a></code></h3>
<p>Get data related to the data class. This runs each distinct
step in the workflow in order.
Internally calls <a href='#method-download'><code>download()</code></a>,
<a href='#method-clean'><code>clean()</code></a>,
<a href='#method-filter'><code><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter()</a></code></a> and
<a href='#method-process'><code>process()</code></a>
<code>download</code>, <code>clean</code>, <code>filter</code> and <code>process</code> methods.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>get</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<h3 class='hasAnchor' id='list-get-'><a class='anchor' aria-hidden='true' href='#list-get-'></a>Method <code><a href='https://rdrr.io/r/base/get.html'>get()</a></code></h3>
<p>Get data related to the data class. This runs each distinct
step in the workflow in order.
Internally calls <a href='#method-download'><code>download()</code></a>,
<a href='#method-clean'><code>clean()</code></a>,
<a href='#method-filter'><code><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter()</a></code></a> and
<a href='#method-process'><code>process()</code></a>
<code>download</code>, <code>clean</code>, <code>filter</code> and <code>process</code> methods.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>get</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<p><hr>
<a id="method-return"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code><a href='https://rdrr.io/r/base/function.html'>return()</a></code></h3>
<p>Return data. Designed to be called after
<a href='#method-process'><code>process()</code></a>
this uses the steps argument to return either a
list of all the data preserved at each step or just the processed data.
For most datasets a custom method should not be needed.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='kw'>return</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<h3 class='hasAnchor' id='list-return-'><a class='anchor' aria-hidden='true' href='#list-return-'></a>Method <code><a href='https://rdrr.io/r/base/function.html'>return()</a></code></h3>
<p>Return data. Designed to be called after
<a href='#method-process'><code>process()</code></a>
this uses the steps argument to return either a
list of all the data preserved at each step or just the processed data.
For most datasets a custom method should not be needed.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='kw'>return</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<p><hr>
<a id="method-summary"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code><a href='https://rdrr.io/r/base/summary.html'>summary()</a></code></h3>
<p>Create a table of summary information for the data set
being processed.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>summary</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='returns'><a class='anchor' aria-hidden='true' href='#returns'></a>Returns</h4>
<p>Returns a single row summary tibble containing the origin of the
data source, class, level 1 and 2 region names, the type of data,
the urls of the raw data and the columns present in the raw data.</p>
<h3 class='hasAnchor' id='list-summary-'><a class='anchor' aria-hidden='true' href='#list-summary-'></a>Method <code><a href='https://rdrr.io/r/base/summary.html'>summary()</a></code></h3>
<p>Create a table of summary information for the data set
being processed.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>summary</span><span class='op'>(</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='returns'><a class='anchor' aria-hidden='true' href='#returns'></a>Returns</h4>
<p>Returns a single row summary tibble containing the origin of the
data source, class, level 1 and 2 region names, the type of data,
the urls of the raw data and the columns present in the raw data.</p>
<p><hr>
<a id="method-test"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>test()</code></h3>
<p>Run tests on a country class instance. Calling <code>test()</code> on a
class instance runs tests with the settings in use. For example, if you
set <code>level = "1"</code> and <code>localise = FALSE</code> the tests will be run on level 1
data which is not localised. Rather than downloading data for a test
users can provide a path to a snapshot file of data to test instead.
Tests are run on a clone of the class. This method calls generic tests
for all country class objects. It also calls country specific tests
which can be defined in an individual country class method called
<code>specific_tests()</code>. The snapshots contain the first 1000 rows of data.
For more details see the
<a href='https://github.com/epiforecasts/covidregionaldata/tree/master/vignettes/testing.Rmd'>'testing' vignette</a>: <code>vignette(testing)</code>.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>test</span><span class='op'>(</span>
  download <span class='op'>=</span> <span class='cn'>FALSE</span>,
  snapshot_dir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"/snapshots"</span><span class='op'>)</span>,
  all <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>download</code></dt><dd><p>logical. To download the data (TRUE) or use a snapshot
(FALSE). Defaults to FALSE.</p></dd>

<dt><code>snapshot_dir</code></dt><dd><p>character_array the name of a directory to save the
downloaded data or read from. If not defined a directory called
'snapshots' will be created in the temp directory. Snapshots are saved as
rds files with the class name and level: e.g. <code>Italy_level_1.rds</code>.</p></dd>

<dt><code>all</code></dt><dd><p>logical. Run tests with all settings (TRUE) or with those
defined in the current class instance (FALSE). Defaults to FALSE.</p></dd>

<dt><code>...</code></dt><dd><p>Additional parameters to pass to <code>specific_tests</code></p></dd>

</dl><p></div></p>
<h3 class='hasAnchor' id='list-test-'><a class='anchor' aria-hidden='true' href='#list-test-'></a>Method <code>test()</code></h3>
<p>Run tests on a country class instance. Calling <code>test()</code> on a
class instance runs tests with the settings in use. For example, if you
set <code>level = "1"</code> and <code>localise = FALSE</code> the tests will be run on level 1
data which is not localised. Rather than downloading data for a test
users can provide a path to a snapshot file of data to test instead.
Tests are run on a clone of the class. This method calls generic tests
for all country class objects. It also calls country specific tests
which can be defined in an individual country class method called
<code>specific_tests()</code>. The snapshots contain the first 1000 rows of data.
For more details see the
<a href='https://github.com/epiforecasts/covidregionaldata/tree/master/vignettes/testing.Rmd'>'testing' vignette</a>: <code>vignette(testing)</code>.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>test</span><span class='op'>(</span>
  download <span class='op'>=</span> <span class='cn'>FALSE</span>,
  snapshot_dir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"/snapshots"</span><span class='op'>)</span>,
  all <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>download</code></dt><dd><p>logical. To download the data (TRUE) or use a snapshot
(FALSE). Defaults to FALSE.</p></dd>

<dt><code>snapshot_dir</code></dt><dd><p>character_array the name of a directory to save the
downloaded data or read from. If not defined a directory called
'snapshots' will be created in the temp directory. Snapshots are saved as
rds files with the class name and level: e.g. <code>Italy_level_1.rds</code>.</p></dd>

<dt><code>all</code></dt><dd><p>logical. Run tests with all settings (TRUE) or with those
defined in the current class instance (FALSE). Defaults to FALSE.</p></dd>

<dt><code>...</code></dt><dd><p>Additional parameters to pass to <code>specific_tests</code></p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='method-'><a class='anchor' aria-hidden='true' href='#method-'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>
<h3 class='hasAnchor' id='list-clone-'><a class='anchor' aria-hidden='true' href='#list-clone-'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='usage'><a class='anchor' aria-hidden='true' href='#usage'></a>Usage</h4>
<p><div class="r"></p><pre class='sourceCode r'><code><span class='va'>DataClass</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></code></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' aria-hidden='true' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Katharine Sherratt, Joe Palmer, Richard Martin-Nielsen, Jonnie Bevan, Hamish Gibbs, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '721a43acf6af66699c04bd8b2af75ff1',
    indexName: 'epiforecasts',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  

  </body>
</html>


