<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>United Kingdom Class for downloading, cleaning and processing notification
data. — UK • covidregionaldata</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="United Kingdom Class for downloading, cleaning and processing notification
data. — UK"><meta property="og:description" content="Extracts daily COVID-19 data for the UK, stratified by region
and nation. Additional options for this class are: to return subnational
English regions using NHS region boundaries instead of PHE boundaries
(nhsregions = TRUE), a release date to download from (release_date) and a
geographical resolution (resolution)."><meta property="og:image" content="epiforecasts.io/covidregionaldata/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">covidregionaldata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.2.3000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/quickstart.html">Getting Started</a>
</li>
<li>
  <a href="../articles/supported-countries.html">Supported countries</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/slowstart.html">Package Overview</a>
    </li>
    <li>
      <a href="../articles/testing.html">Testing Datasets</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/epiforecasts/covidregionaldata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>United Kingdom Class for downloading, cleaning and processing notification
data.</h1>
    <small class="dont-index">Source: <a href="https://github.com/epiforecasts/covidregionaldata/blob/HEAD/R/UK.R" class="external-link"><code>R/UK.R</code></a></small>
    <div class="hidden name"><code>UK.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extracts daily COVID-19 data for the UK, stratified by region
and nation. Additional options for this class are: to return subnational
English regions using NHS region boundaries instead of PHE boundaries
(nhsregions = TRUE), a release date to download from (release_date) and a
geographical resolution (resolution).</p>
    </div>

    <div id="ref-usage">Usage,NULL</div>

    <div id="source">
    <h2>Source</h2>
    <p><a href="https://coronavirus.data.gov.uk/details/download" class="external-link">https://coronavirus.data.gov.uk/details/download</a></p>
<p><a href="https://coronavirus.data.gov.uk/details/download" class="external-link">https://coronavirus.data.gov.uk/details/download</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Subnational data sources
<code><a href="Belgium.html">Belgium</a></code>,
<code><a href="Brazil.html">Brazil</a></code>,
<code><a href="Canada.html">Canada</a></code>,
<code><a href="Colombia.html">Colombia</a></code>,
<code><a href="Covid19DataHub.html">Covid19DataHub</a></code>,
<code><a href="Cuba.html">Cuba</a></code>,
<code><a href="Estonia.html">Estonia</a></code>,
<code><a href="France.html">France</a></code>,
<code><a href="Germany.html">Germany</a></code>,
<code><a href="Google.html">Google</a></code>,
<code><a href="India.html">India</a></code>,
<code><a href="Italy.html">Italy</a></code>,
<code><a href="JHU.html">JHU</a></code>,
<code><a href="Lithuania.html">Lithuania</a></code>,
<code><a href="Mexico.html">Mexico</a></code>,
<code><a href="Netherlands.html">Netherlands</a></code>,
<code><a href="SouthAfrica.html">SouthAfrica</a></code>,
<code><a href="Switzerland.html">Switzerland</a></code>,
<code><a href="USA.html">USA</a></code>,
<code><a href="Vietnam.html">Vietnam</a></code></p></div>
    </div>
    <div id="super-class">
    <h2>Super class</h2>
    <p><code><a href="DataClass.html">covidregionaldata::DataClass</a></code> -&gt; <code>UK</code></p>
    </div>
    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>origin</code></dt>
<dd><p>name of origin to fetch data for</p></dd>


<dt><code>supported_levels</code></dt>
<dd><p>A list of supported levels.</p></dd>


<dt><code>supported_region_names</code></dt>
<dd><p>A list of region names in order of level.</p></dd>


<dt><code>supported_region_codes</code></dt>
<dd><p>A list of region codes in order of level.</p></dd>


<dt><code>common_data_urls</code></dt>
<dd><p>List of named links to raw data. The first, and
only entry, is be named main.</p></dd>


<dt><code>level_data_urls</code></dt>
<dd><p>List of named links to raw data that are level
specific.</p></dd>


<dt><code>source_data_cols</code></dt>
<dd><p>existing columns within the raw data</p></dd>


<dt><code>source_text</code></dt>
<dd><p>Plain text description of the source of the data</p></dd>


<dt><code>source_url</code></dt>
<dd><p>Website address for explanation/introduction of the
data</p></dd>


<dt><code>query_filters</code></dt>
<dd><p>Set what filters to use to query the data</p></dd>


<dt><code>nhsregions</code></dt>
<dd><p>Whether to include NHS regions in the data</p></dd>


<dt><code>release_date</code></dt>
<dd><p>The release date for the data</p></dd>


<dt><code>resolution</code></dt>
<dd><p>The resolution of the data to return</p></dd>


<dt><code>authority_data</code></dt>
<dd><p>The raw data for creating authority lookup tables</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-set_region_codes"><code>UK$set_region_codes()</code></a></p></li>
<li><p><a href="#method-download"><code>UK$download()</code></a></p></li>
<li><p><a href="#method-clean_level_1"><code>UK$clean_level_1()</code></a></p></li>
<li><p><a href="#method-clean_level_2"><code>UK$clean_level_2()</code></a></p></li>
<li><p><a href="#method-new"><code>UK$new()</code></a></p></li>
<li><p><a href="#method-download_filter"><code>UK$download_filter()</code></a></p></li>
<li><p><a href="#method-set_filters"><code>UK$set_filters()</code></a></p></li>
<li><p><a href="#method-download_nhs_regions"><code>UK$download_nhs_regions()</code></a></p></li>
<li><p><a href="#method-add_nhs_regions"><code>UK$add_nhs_regions()</code></a></p></li>
<li><p><a href="#method-specific_tests"><code>UK$specific_tests()</code></a></p></li>
<li><p><a href="#method-clone"><code>UK$clone()</code></a></p></li>
</ul></div><p><details><summary>Inherited methods</summary><ul><li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="available_regions"><a href="DataClass.html#method-available_regions"><code>covidregionaldata::DataClass$available_regions()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="clean"><a href="DataClass.html#method-clean"><code>covidregionaldata::DataClass$clean()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="clean_common"><a href="DataClass.html#method-clean_common"><code>covidregionaldata::DataClass$clean_common()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="download_JSON"><a href="DataClass.html#method-download_JSON"><code>covidregionaldata::DataClass$download_JSON()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="filter"><a href="DataClass.html#method-filter"><code>covidregionaldata::DataClass$filter()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="get"><a href="DataClass.html#method-get"><code>covidregionaldata::DataClass$get()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="process"><a href="DataClass.html#method-process"><code>covidregionaldata::DataClass$process()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="return"><a href="DataClass.html#method-return"><code>covidregionaldata::DataClass$return()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="summary"><a href="DataClass.html#method-summary"><code>covidregionaldata::DataClass$summary()</code></a></span></p></li>
<li><p><span class="pkg-link" data-pkg="covidregionaldata" data-topic="DataClass" data-id="test"><a href="DataClass.html#method-test"><code>covidregionaldata::DataClass$test()</code></a></span></p></li>
</ul></details></p><hr><a id="method-set_region_codes"></a><div class="section">
<h3 id="method-set-region-codes-">Method <code>set_region_codes()</code><a class="anchor" aria-label="anchor" href="#method-set-region-codes-"></a></h3>
<p>Specific function for getting region codes for UK .</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">set_region_codes</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-download"></a><div class="section">
<h3 id="method-download-">Method <code>download()</code><a class="anchor" aria-label="anchor" href="#method-download-"></a></h3>
<p>UK specific <code>download()</code> function.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">download</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-clean_level_1"></a><div class="section">
<h3 id="method-clean-level-">Method <code>clean_level_1()</code><a class="anchor" aria-label="anchor" href="#method-clean-level-"></a></h3>
<p>Region Level Data Cleaning</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">clean_level_1</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-clean_level_2"></a><div class="section">
<h3 id="method-clean-level--1">Method <code>clean_level_2()</code><a class="anchor" aria-label="anchor" href="#method-clean-level--1"></a></h3>
<p>Level 2 Data Cleaning</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">clean_level_2</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initalize the UK Class</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va"><a href="../reference/UK.html">UK</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>nhsregions <span class="op">=</span> <span class="cn">FALSE</span>, release_date <span class="op">=</span> <span class="cn">NULL</span>, resolution <span class="op">=</span> <span class="st">"utla"</span>, <span class="va">...</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>nhsregions</code></dt>
<dd><p>Return subnational English regions using NHS region
boundaries instead of PHE boundaries.</p></dd>


<dt><code>release_date</code></dt>
<dd><p>Date data was released. Default is to extract
latest release. Dates should be in the format "yyyy-mm-dd".</p></dd>


<dt><code>resolution</code></dt>
<dd><p>"utla" (default) or "ltla", depending on which
geographical resolution is preferred</p></dd>


<dt><code>...</code></dt>
<dd><p>Optional arguments passed to <code><a href="DataClass.html">DataClass()</a></code> initalize.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
UK$new(
 level = 1, localise = TRUE,
 verbose = True, steps = FALSE,
 nhsregions = FALSE, release_date = NULL,
 resolution = "utla"
)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-download_filter"></a><div class="section">
<h3 id="method-download-filter-">Method <code>download_filter()</code><a class="anchor" aria-label="anchor" href="#method-download-filter-"></a></h3>
<p>Helper function for downloading data API</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">download_filter</span><span class="op">(</span><span class="va">filter</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>filter</code></dt>
<dd><p>region filters</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-set_filters"></a><div class="section">
<h3 id="method-set-filters-">Method <code>set_filters()</code><a class="anchor" aria-label="anchor" href="#method-set-filters-"></a></h3>
<p>Set filters for UK data api query.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">set_filters</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-download_nhs_regions"></a><div class="section">
<h3 id="method-download-nhs-regions-">Method <code>download_nhs_regions()</code><a class="anchor" aria-label="anchor" href="#method-download-nhs-regions-"></a></h3>
<p>Download NHS data for level 1 regions
Separate NHS data is available for "first" admissions, excluding
readmissions. This is available for England + English regions only.
Data are available separately for the periods 2020-08-01 to 2021-04-06,
and 2021-04-07 - present.
See: <a href="https://www.england.nhs.uk/statistics/statistical-work-areas/covid-19-hospital-activity/" class="external-link">https://www.england.nhs.uk/statistics/statistical-work-areas/covid-19-hospital-activity/</a>
Section 2, "2. Estimated new hospital cases"</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">download_nhs_regions</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>nhs data.frame of nhs regions</p>
</div>

</div><p></p><hr><a id="method-add_nhs_regions"></a><div class="section">
<h3 id="method-add-nhs-regions-">Method <code>add_nhs_regions()</code><a class="anchor" aria-label="anchor" href="#method-add-nhs-regions-"></a></h3>
<p>Add NHS data for level 1 regions
Separate NHS data is available for "first" admissions, excluding
readmissions. This is available for England + English regions only.
See: <a href="https://www.england.nhs.uk/statistics/statistical-work-areas/covid-19-hospital-activity/" class="external-link">https://www.england.nhs.uk/statistics/statistical-work-areas/covid-19-hospital-activity/</a>
Section 2, "2. Estimated new hospital cases"</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">add_nhs_regions</span><span class="op">(</span><span class="va">clean_data</span>, <span class="va">nhs_data</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>clean_data</code></dt>
<dd><p>Cleaned UK covid-19 data</p></dd>


<dt><code>nhs_data</code></dt>
<dd><p>NHS region data</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-specific_tests"></a><div class="section">
<h3 id="method-specific-tests-">Method <code>specific_tests()</code><a class="anchor" aria-label="anchor" href="#method-specific-tests-"></a></h3>
<p>Specific tests for UK data. In addition to generic tests ran
by <code>DataClass$test()</code> data for NHS regions are downloaded and ran through
the same generic checks (test_cleaning, test_processing, test_return). If
download = TRUE or a snapshot file is not found, the nhs data is
downloaded and saved to the snapshot location provided. If an existing
snapshot file is found then this data is used in the next tests.
Tests data can be downloaded, cleaned, processed and returned. Designed
to be ran from <code>test</code> and not ran directly.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">specific_tests</span><span class="op">(</span>
  <span class="va">self_copy</span>,
  download <span class="op">=</span> <span class="cn">FALSE</span>,
  all <span class="op">=</span> <span class="cn">FALSE</span>,
  snapshot_path <span class="op">=</span> <span class="st">""</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>self_copy</code></dt>
<dd><p>R6class the object to test.</p></dd>


<dt><code>download</code></dt>
<dd><p>logical. To download the data (TRUE) or use a snapshot
(FALSE). Defaults to FALSE.</p></dd>


<dt><code>all</code></dt>
<dd><p>logical. Run tests with all settings (TRUE) or with those
defined in the current class instance (FALSE). Defaults to FALSE.</p></dd>


<dt><code>snapshot_path</code></dt>
<dd><p>character_array the path to save the downloaded
snapshot to. Works on the snapshot path constructed by <code>test</code> but adds</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional parameters to pass to <code>specific_tests</code></p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">UK</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># setup a data cache</span></span>
<span class="r-in"><span class="fu"><a href="start_using_memoise.html">start_using_memoise</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># download, clean and process level 1 UK data with hospital admissions</span></span>
<span class="r-in"><span class="va">region</span> <span class="op">&lt;-</span> <span class="va">UK</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>level <span class="op">=</span> <span class="st">"1"</span>, nhsregions <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">region</span><span class="op">$</span><span class="kw">return</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># initialise level 2 data</span></span>
<span class="r-in"><span class="va">utla</span> <span class="op">&lt;-</span> <span class="va">UK</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>level <span class="op">=</span> <span class="st">"2"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># download UTLA data</span></span>
<span class="r-in"><span class="va">utla</span><span class="op">$</span><span class="fu">download</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># clean UTLA data</span></span>
<span class="r-in"><span class="va">utla</span><span class="op">$</span><span class="fu">clean</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># inspect available level 1 regions</span></span>
<span class="r-in"><span class="va">utla</span><span class="op">$</span><span class="fu">available_regions</span><span class="op">(</span>level <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># filter data to the East of England</span></span>
<span class="r-in"><span class="va">utla</span><span class="op">$</span><span class="fu">filter</span><span class="op">(</span><span class="st">"East of England"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># process UTLA data</span></span>
<span class="r-in"><span class="va">utla</span><span class="op">$</span><span class="fu">process</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># return processed and filtered data</span></span>
<span class="r-in"><span class="va">utla</span><span class="op">$</span><span class="kw">return</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># inspect all data steps</span></span>
<span class="r-in"><span class="va">utla</span><span class="op">$</span><span class="va">data</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"><span class="co">## Method `UK$new`</span></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="va">UK</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span class="r-in"> level <span class="op">=</span> <span class="fl">1</span>, localise <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span class="r-in"> verbose <span class="op">=</span> <span class="va">True</span>, steps <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span class="r-in"> nhsregions <span class="op">=</span> <span class="cn">FALSE</span>, release_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span class="r-in"> resolution <span class="op">=</span> <span class="st">"utla"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joseph Palmer, Katharine Sherratt, Richard Martin-Nielsen, Jonnie Bevan, Hamish Gibbs, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '721a43acf6af66699c04bd8b2af75ff1',
    indexName: 'epiforecasts',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

